<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

  <!--radix_placeholder_meta_tags-->
  <title>Ranking QBs Using Era Adjusted Elo</title>
  
  <meta property="description" itemprop="description" content="Use 538&#39;s QB Elo value, a highly predictive measurement of QB impact, to compare QB careers across era"/>
  
  
  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2020-08-22"/>
  <meta property="article:created" itemprop="dateCreated" content="2020-08-22"/>
  <meta name="article:author" content="Robby Greer"/>
  
  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Ranking QBs Using Era Adjusted Elo"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Use 538&#39;s QB Elo value, a highly predictive measurement of QB impact, to compare QB careers across era"/>
  <meta property="og:locale" content="en_US"/>
  
  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Ranking QBs Using Era Adjusted Elo"/>
  <meta property="twitter:description" content="Use 538&#39;s QB Elo value, a highly predictive measurement of QB impact, to compare QB careers across era"/>
  
  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output","repository_url","categories"]}},"value":[{"type":"character","attributes":{},"value":["Ranking QBs Using Era Adjusted Elo"]},{"type":"character","attributes":{},"value":["Use 538's QB Elo value, a highly predictive measurement of QB impact, to compare QB careers across era \n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Robby Greer"]},{"type":"character","attributes":{},"value":["https://twitter.com/greerreNFL"]}]}]},{"type":"character","attributes":{},"value":["08-22-2020"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_depth"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]}]}]},{"type":"character","attributes":{},"value":["https://github.com/mrcaseb/open-source-football"]},{"type":"character","attributes":{},"value":["Elo","python"]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["ranking-qbs-using-era-adjusted-elo_files/bowser-1.9.3/bowser.min.js","ranking-qbs-using-era-adjusted-elo_files/distill-2.2.21/template.v2.js","ranking-qbs-using-era-adjusted-elo_files/figure-html5/all_time_greats-1.png","ranking-qbs-using-era-adjusted-elo_files/figure-html5/allen-1.png","ranking-qbs-using-era-adjusted-elo_files/figure-html5/cowboys-1.png","ranking-qbs-using-era-adjusted-elo_files/figure-html5/jamarcus-1.png","ranking-qbs-using-era-adjusted-elo_files/figure-html5/leaf-1.png","ranking-qbs-using-era-adjusted-elo_files/figure-html5/mahomes-1.png","ranking-qbs-using-era-adjusted-elo_files/figure-html5/plot_median-1.png","ranking-qbs-using-era-adjusted-elo_files/jquery-1.11.3/jquery.min.js","ranking-qbs-using-era-adjusted-elo_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->
  
  <style type="text/css">
  
  body {
    background-color: white;
  }
  
  .pandoc-table {
    width: 100%;
  }
  
  .pandoc-table>caption {
    margin-bottom: 10px;
  }
  
  .pandoc-table th:not([align]) {
    text-align: left;
  }
  
  .pagedtable-footer {
    font-size: 15px;
  }
  
  .html-widget {
    margin-bottom: 2.0em;
  }
  
  .l-screen-inset {
    padding-right: 16px;
  }
  
  .l-screen .caption {
    margin-left: 10px;
  }
  
  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .shaded-content {
    background: white;
  }
  
  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }
  
  .hidden {
    display: none !important;
  }
  
  d-article {
    padding-bottom: 30px;
  }
  
  d-appendix {
    padding-top: 30px;
  }
  
  d-article>p>img {
    width: 100%;
  }
  
  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }
  
  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  /* CSS for table of contents */
  
  .d-toc {
    color: rgba(0,0,0,0.8);
    font-size: 0.8em;
    line-height: 1em;
  }
  
  .d-toc-header {
    font-size: 0.6rem;
    font-weight: 400;
    color: rgba(0, 0, 0, 0.5);
    text-transform: uppercase;
    margin-top: 0;
    margin-bottom: 1.3em;
  }
  
  .d-toc a {
    border-bottom: none;
  }
  
  .d-toc ul {
    padding-left: 0;
  }
  
  .d-toc li>ul {
    padding-top: 0.8em;
    padding-left: 16px;
    margin-bottom: 0.6em;
  }
  
  .d-toc ul,
  .d-toc li {
    list-style-type: none;
  }
  
  .d-toc li {
    margin-bottom: 0.9em;
  }
  
  .d-toc-separator {
    margin-top: 20px;
    margin-bottom: 2em;
  }
  
  .d-article-with-toc {
    border-top: none;
    padding-top: 0;
  }
  
  
  
  /* Tweak code blocks (note that this CSS is repeated above in an injection
     into the d-code shadow dom) */
  
  d-code {
    overflow-x: auto !important;
  }
  
  pre.d-code code.d-code {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }
  
  pre.text-output {
  
    font-size: 12px;
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  @media(min-width: 768px) {
  
  d-code {
    overflow-x: visible !important;
  }
  
  pre.d-code code.d-code  {
      padding-left: 18px;
      font-size: 14px;
  }
  pre.text-output {
    font-size: 14px;
  }
  }
  
  /* Figure */
  
  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }
  
  .figure img {
    width: 100%;
  }
  
  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }
  
  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }
  
  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }
  
  
  
  /* Tweak 1000px media break to show more text */
  
  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }
  
    .grid {
      grid-column-gap: 16px;
    }
  
    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }
  
  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }
  
    .grid {
      grid-column-gap: 32px;
    }
  }
  
  
  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */
  
  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  
  
  /* Social footer */
  
  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }
  
  .disqus-comments {
    margin-right: 30px;
  }
  
  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }
  
  #disqus_thread {
    margin-top: 30px;
  }
  
  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }
  
  .article-sharing a:hover {
    border-bottom: none;
  }
  
  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }
  
  .subscribe p {
    margin-bottom: 0.5em;
  }
  
  
  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }
  
  
  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }
  
  .custom p {
    margin-bottom: 0.5em;
  }
  
  
  /* Improve display for browsers without grid (IE/Edge <= 15) */
  
  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }
  
  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }
  
  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }
  
  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }
  
  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }
  
  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }
  
  
  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }
  
  .downlevel .footnotes ol {
    padding-left: 13px;
  }
  
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }
  
  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }
  
  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }
  
  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  </style>
  
  <script type="application/javascript">
  
  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }
  
  // show body when load is complete
  function on_load_complete() {
  
    // set body to visible
    document.body.style.visibility = 'visible';
  
    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }
  
    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }
  
  function init_distill() {
  
    init_common();
  
    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);
  
    // create d-title
    $('.d-title').changeElementType('d-title');
  
    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);
  
    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();
  
    // move posts container into article
    $('.posts-container').appendTo($('d-article'));
  
    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');
  
    // create d-bibliography
    var bibliography = $('<d-bibliography></d-bibliography>');
    $('#distill-bibliography').wrap(bibliography);
  
    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;
  
    // replace citations with <d-cite>
    $('.citation').each(function(i, val) {
      appendix = true;
      var cites = $(this).attr('data-cites').split(" ");
      var dt_cite = $('<d-cite></d-cite>');
      dt_cite.attr('key', cites.join());
      $(this).replaceWith(dt_cite);
    });
    // remove refs
    $('#refs').remove();
  
    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();
  
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-toc a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });
  
    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');
  
    // replace code blocks with d-code
    $('pre>code').each(function(i, val) {
      var code = $(this);
      var pre = code.parent();
      var clz = "";
      var language = pre.attr('class');
      if (language) {
        // map unknown languages to "clike" (without this they just dissapear)
        if ($.inArray(language, ["bash", "clike", "css", "go", "html",
                                 "javascript", "js", "julia", "lua", "markdown",
                                 "markup", "mathml", "python", "svg", "xml"]) == -1)
          language = "clike";
        language = ' language="' + language + '"';
        var dt_code = $('<d-code block' + language + clz + '></d-code>');
        dt_code.text(code.text());
        pre.replaceWith(dt_code);
      } else {
        code.addClass('text-output').unwrap().changeElementType('pre');
      }
    });
  
    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {
  
      // capture layout
      var layout = $(this).attr('data-layout');
  
      // apply layout to markdown level block elements
      var elements = $(this).children().not('d-code, pre.text-output, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });
  
  
      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });
  
    // load distill framework
    load_distill_framework();
  
    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {
  
      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;
  
      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');
  
      // table of contents
      if (have_authors) // adjust border if we are in authors
        $('.d-toc').parent().addClass('d-article-with-toc');
  
      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');
  
      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }
  
      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');
  
      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");
  
      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }
  
       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }
  
      // inject pre code styles (can't do this with a global stylesheet b/c a shadow root is used)
      $('d-code').each(function(i, val) {
        var style = document.createElement('style');
        style.innerHTML = 'pre code { padding-left: 10px; font-size: 12px; border-left: 2px solid rgba(0,0,0,0.1); } ' +
                          '@media(min-width: 768px) { pre code { padding-left: 18px; font-size: 14px; } }';
        if (this.shadowRoot)
          this.shadowRoot.appendChild(style);
      });
  
      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();
  
      // clear polling timer
      clearInterval(tid);
  
      // show body now that everything is ready
      on_load_complete();
    }
  
    var tid = setInterval(distill_post_process, 50);
    distill_post_process();
  
  }
  
  function init_downlevel() {
  
    init_common();
  
     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));
  
    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
  
    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();
  
    // remove toc
    $('.d-toc-header').remove();
    $('.d-toc').remove();
    $('.d-toc-separator').remove();
  
    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });
  
  
    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);
  
    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);
  
    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();
  
    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();
  
    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));
  
    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });
  
    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));
  
    $('body').addClass('downlevel');
  
    on_load_complete();
  }
  
  
  function init_common() {
  
    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};
  
        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });
  
        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);
  
    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});
  
    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });
  
      }
    });
  
    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });
  
    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }
  
    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');
  
    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");
  
    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();
  
    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }
  
  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });
  
  </script>
  
  <!--/radix_placeholder_distill-->
  <script src="ranking-qbs-using-era-adjusted-elo_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="ranking-qbs-using-era-adjusted-elo_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="ranking-qbs-using-era-adjusted-elo_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="ranking-qbs-using-era-adjusted-elo_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Ranking QBs Using Era Adjusted Elo","description":"Use 538's QB Elo value, a highly predictive measurement of QB impact, to compare QB careers across era","authors":[{"author":"Robby Greer","authorURL":"https://twitter.com/greerreNFL","affiliation":"&nbsp;","affiliationURL":"#"}],"publishedDate":"2020-08-22T00:00:00.000+02:00","citationText":"Greer, 2020"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Ranking QBs Using Era Adjusted Elo</h1>
<p><p>Use 538’s QB Elo value, a highly predictive measurement of QB impact, to compare QB careers across era</p></p>
</div>

<div class="d-byline">
  Robby Greer <a href="https://twitter.com/greerreNFL" class="uri">https://twitter.com/greerreNFL</a> 
  
<br/>08-22-2020
</div>

<div class="d-article">
<h3 class="d-toc-header">Table of Contents</h3>
<nav class="d-toc" id="TOC">
<ul>
<li><a href="#part-0-background-and-summary">Part 0: Background and summary</a></li>
<li><a href="#part-1-importing-and-cleaning-data">Part 1: Importing and cleaning data</a></li>
<li><a href="#part-2-adjusting-for-era">Part 2: Adjusting for era</a></li>
<li><a href="#part-3-adding-stats-and-compiling-careers">Part 3: Adding stats and compiling careers</a></li>
<li><a href="#part-4-graphing-careers">Part 4: Graphing careers</a></li>
</ul>
</nav>
<hr class="d-toc-separator"/>
<h2 id="part-0-background-and-summary">Part 0: Background and summary</h2>
<p>Elo is a ranking and prediction framework that 538 has successfully applied to the NFL. Because QB performance plays such a strong role in overall team performance, 538’s Elo framework models QB contributions separately before adding them back to the overall team grade.</p>
<p>These QB rankings significantly improve the overall predictive power of the framework, making them a fairly accurate measure of a QB’s value. Every 25 points of Elo are equivalent to roughly 1 point of expected game margin. For instance, a QB with an Elo of 100 would be worth roughly 4 points more per game than a replacement level QB.</p>
<p>Measuring the cumulative Elo added by a QB over the course of their career is akin to measuring the total points added above a replacement level player. In this post, QB Elo values are pulled from 538 and normalized by era, allowing for an interesting comparison of QB careers throughout the history of the NFL. As QB rankings can be a touchy subject, it is worth noting that these rankings are just one quantitative view of a QBs overall performance.</p>
<h2 id="part-1-importing-and-cleaning-data">Part 1: Importing and cleaning data</h2>
<p>First, import packages:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
import pandas as pd
import numpy
import requests
import seaborn as sns
import matplotlib.pyplot as plt</code></pre>
</div>
<p>Next, pull Elo data from 538 and load it into a pandas data frame:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
data_link = &#39;https://projects.fivethirtyeight.com/nfl-api/nfl_elo.csv&#39;
data_df = pd.read_csv(data_link)</code></pre>
</div>
<p>We only want data with QB grades, and we’ll exclude playoffs:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
data_df = data_df[(~numpy.isnan(data_df[&#39;qbelo1_pre&#39;])) &amp; (~numpy.isnan(data_df[&#39;qbelo2_pre&#39;]))]
data_df = data_df[data_df[&#39;playoff&#39;].isna()]</code></pre>
</div>
<p>Elo game data comes with game dates, not weeks:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
data_df[&#39;date&#39;].sample(5)</code></pre>
<pre><code>
12007    2003-09-07
12393    2004-11-07
9108     1991-10-20
4180     1968-09-15
3363     1963-09-15
Name: date, dtype: object</code></pre>
</div>
<p>Which we’ll want to convert to weeks to make them easier to group:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
## create a datetime series from the date ##
data_df[&#39;date_time&#39;] = pd.to_datetime(data_df[&#39;date&#39;])

## mondays are new weeks, so subtract a day and then trunc to get an NFL week ##
data_df[&#39;date_time&#39;] = data_df[&#39;date_time&#39;] - pd.Timedelta(days=1)
data_df[&#39;week_of&#39;] = data_df[&#39;date_time&#39;].dt.week</code></pre>
</div>
<p>Next, separate Home and Away data and merge it into a single flat file, filtering out unnecessary fields and renaming columns in the process:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
## create a flat file ##
home_data_df = data_df.copy()[[
    &#39;season&#39;,
    &#39;week_of&#39;,
    &#39;qb1&#39;,
    &#39;qb1_value_post&#39;,
    &#39;score1&#39;,
    &#39;score2&#39;
]].rename(columns={
    &#39;qb1&#39; : &#39;qb_name&#39;,
    &#39;qb1_value_post&#39; : &#39;qb_elo_value&#39;,
    &#39;score1&#39; : &#39;points_for&#39;,
    &#39;score2&#39; : &#39;points_against&#39;,
})

away_data_df = data_df.copy()[[
    &#39;season&#39;,
    &#39;week_of&#39;,
    &#39;qb2&#39;,
    &#39;qb2_value_post&#39;,
    &#39;score2&#39;,
    &#39;score1&#39;
]].rename(columns={
    &#39;qb2&#39; : &#39;qb_name&#39;,
    &#39;qb2_value_post&#39; : &#39;qb_elo_value&#39;,
    &#39;score2&#39; : &#39;points_for&#39;,
    &#39;score1&#39; : &#39;points_against&#39;,
})

flat_df = pd.concat([home_data_df,away_data_df])
flat_df = flat_df.sort_values(by=[&#39;season&#39;,&#39;week_of&#39;])</code></pre>
</div>
<p>This yields a data frame with individual QB games:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
flat_df.sample(5)</code></pre>
<pre><code>
       season  week_of  ... points_for  points_against
11821    2002       41  ...         10              17
2500     1954       44  ...         30               6
5913     1977       38  ...         30              27
12046    2003       38  ...         12              13
5502     1975       38  ...         14              42

[5 rows x 6 columns]</code></pre>
</div>
<p>Note that the above data are Elo values. To convert Elo values to Elo, you’d need to multiply by 3.3 per 538’s methodology. Add some addition stats:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
flat_df[&#39;point_margin&#39;] = flat_df[&#39;points_for&#39;] - flat_df[&#39;points_against&#39;]
flat_df[&#39;win&#39;] = numpy.where(flat_df[&#39;point_margin&#39;] &gt; 0,1,0)</code></pre>
</div>
<h2 id="part-2-adjusting-for-era">Part 2: Adjusting for era</h2>
<p>538’s QB ratings are based on stats that have increased overtime alongside improved QB play. This can be seen by looking at the median QB Elo value overtime:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
## calculate median QB values by season week ##
median_df = flat_df.groupby([&#39;season&#39;,&#39;week_of&#39;]).agg(
    qb_elo_value_median = (&#39;qb_elo_value&#39;, &#39;median&#39;),
    qb_elo_value_min = (&#39;qb_elo_value&#39;, &#39;min&#39;),
    qb_elo_value_max = (&#39;qb_elo_value&#39;, &#39;max&#39;)
).reset_index()

## plot ##
median_line = median_df[&#39;qb_elo_value_median&#39;].plot.line()
plt.show()</code></pre>
<p><img src="ranking-qbs-using-era-adjusted-elo_files/figure-html5/plot_median-1.png" width="624" /></p>
</div>
<p>To make 538’s Elo values comparable across era, this stat inflation needs to be removed:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
## add weekly median to flat file ##
flat_df = pd.merge(
    flat_df,
    median_df,
    on=[&#39;season&#39;,&#39;week_of&#39;],
    how=&#39;left&#39;
)

## calculate an adjusted stat that removes the median
flat_df[&#39;qb_elo_value_era_adjusted&#39;] = flat_df[&#39;qb_elo_value&#39;] - flat_df[&#39;qb_elo_value_median&#39;]</code></pre>
</div>
<h2 id="part-3-adding-stats-and-compiling-careers">Part 3: Adding stats and compiling careers</h2>
<p>To compare quarterbacks, we’ll need to aggregate all of their QB values, but first, some additional stats can be added to make the ultimate comparisons more interesting. Namely, Elo ranking relative to other starters at a point in time, total starts, and win percentages:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
## add weekly ranking ##
flat_df[&#39;qb_rank&#39;] = flat_df.groupby([&#39;season&#39;,&#39;week_of&#39;])[&#39;qb_elo_value&#39;].rank(method=&#39;max&#39;, ascending=False)
flat_df[&#39;top_1_qb&#39;] = numpy.where(flat_df[&#39;qb_rank&#39;]&lt;=1, 1,0)
flat_df[&#39;top_3_qb&#39;] = numpy.where(flat_df[&#39;qb_rank&#39;]&lt;=3, 1,0)
flat_df[&#39;top_5_qb&#39;] = numpy.where(flat_df[&#39;qb_rank&#39;]&lt;=5, 1,0)

## add cumulative count ##
flat_df[&#39;game_number&#39;] = flat_df.groupby([&#39;qb_name&#39;]).cumcount() + 1
flat_df[&#39;cumulative_era_adjusted_value&#39;] = flat_df.groupby(&#39;qb_name&#39;)[&#39;qb_elo_value_era_adjusted&#39;].transform(pd.Series.cumsum)
flat_df[&#39;cumulative_wins&#39;] = flat_df.groupby(&#39;qb_name&#39;)[&#39;win&#39;].transform(pd.Series.cumsum)
flat_df[&#39;cumulative_best_starter&#39;] = flat_df.groupby(&#39;qb_name&#39;)[&#39;top_1_qb&#39;].transform(pd.Series.cumsum)
flat_df[&#39;cumulative_top_3_starts&#39;] = flat_df.groupby(&#39;qb_name&#39;)[&#39;top_3_qb&#39;].transform(pd.Series.cumsum)
flat_df[&#39;cumulative_top_5_starts&#39;] = flat_df.groupby(&#39;qb_name&#39;)[&#39;top_5_qb&#39;].transform(pd.Series.cumsum)</code></pre>
</div>
<p>After adding stats, compile at the QB level to get a look at their career:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
## aggregate ##
agg_df = flat_df.groupby(&#39;qb_name&#39;).agg(
    total_starts = (&#39;game_number&#39;, &#39;max&#39;),
    cumulative_era_adjusted_elo_value = (&#39;qb_elo_value_era_adjusted&#39;, &#39;sum&#39;),
    winning_percentage = (&#39;win&#39;, &#39;mean&#39;),
    pct_of_starts_as_best_qb = (&#39;top_1_qb&#39;, &#39;mean&#39;),
    pct_of_starts_as_top3_qb = (&#39;top_3_qb&#39;, &#39;mean&#39;),
    pct_of_starts_as_top5_qb = (&#39;top_5_qb&#39;, &#39;mean&#39;)
).reset_index()

agg_df[&#39;average_era_adjusted_elo_value&#39;] = agg_df[&#39;cumulative_era_adjusted_elo_value&#39;] / agg_df[&#39;total_starts&#39;]</code></pre>
</div>
<p>Sort by total Elo value to see the era adjusted rankings:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
## sort ##
agg_df = agg_df.sort_values(by=[&#39;cumulative_era_adjusted_elo_value&#39;],ascending=[False])[[
    &#39;qb_name&#39;,
    &#39;total_starts&#39;,
    &#39;cumulative_era_adjusted_elo_value&#39;,
    &#39;average_era_adjusted_elo_value&#39;,
    &#39;winning_percentage&#39;,
    &#39;pct_of_starts_as_best_qb&#39;,
    &#39;pct_of_starts_as_top3_qb&#39;,
    &#39;pct_of_starts_as_top5_qb&#39;
]]

agg_df[[&#39;qb_name&#39;,&#39;total_starts&#39;,&#39;cumulative_era_adjusted_elo_value&#39;]].head(15)</code></pre>
<pre><code>
            qb_name  total_starts  cumulative_era_adjusted_elo_value
493  Peyton Manning           265                       26065.054253
204      Drew Brees           274                       23763.826759
616       Tom Brady           283                       19225.832143
146      Dan Marino           240                       17160.155283
226  Fran Tarkenton           239                       14498.753253
338     Joe Montana           164                       14043.230167
73      Brett Favre           298                       12764.784141
588     Steve Young           143                       12689.178178
4     Aaron Rodgers           174                       12132.510866
364   Johnny Unitas           185                        9796.247620
144       Dan Fouts           171                        9767.284528
441       Matt Ryan           189                        8398.344958
380    Ken Anderson           172                        7866.688036
495   Philip Rivers           224                        7385.531378
347      John Elway           231                        7250.838144</code></pre>
</div>
<h2 id="part-4-graphing-careers">Part 4: Graphing careers</h2>
<p>Though simple, era adjusted QB Elo appears to provide a fairly good ranking of QBs across era. One interesting way to leverage this measure further is by comparing cumulative QB Elo gained over the course of a QB’s career.</p>
<p>Create a function for graphing career Elo based on a list of QBs:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
def create_qb_chart(qbs_to_plot):
    ## plot career cumulative Elo value based on a list of QBs ##
    ## make a copy of the flat file ##
    chart_df = flat_df.copy()
    ## filter to just relevant fields ##
    chart_df = chart_df[[
        &#39;qb_name&#39;,
        &#39;game_number&#39;,
        &#39;cumulative_era_adjusted_value&#39;
    ]]
    ## create sub selection of QBs
    chart_df = chart_df[numpy.isin(
        chart_df[&#39;qb_name&#39;],
        qbs_to_plot
    )]
    ## set up plot ##
    sns.lineplot(
        &#39;game_number&#39;,
        &#39;cumulative_era_adjusted_value&#39;,
        hue=&#39;qb_name&#39;,
        ci=None,
        palette=&#39;RdPu&#39;,
        data=chart_df
    )
    sns.despine()
    ## set axis titles and sizes ##
    plt.xlabel(&#39;Games Played&#39;, labelpad=10, fontsize=&#39;small&#39;, weight=&#39;bold&#39;)
    plt.ylabel(&#39;Cumulative Elo Value Added&#39;, labelpad=10, fontsize=&#39;small&#39;, weight=&#39;bold&#39;)
    plt.rc(&#39;xtick&#39;,labelsize=&#39;x-small&#39;)
    plt.rc(&#39;ytick&#39;,labelsize=&#39;x-small&#39;)
    ## define plot ranges, leaving a little room for padding ##
    xmin = 0
    xmax = chart_df[&#39;game_number&#39;].max() * 1.2
    ymin = chart_df[&#39;cumulative_era_adjusted_value&#39;].min() * 1.15
    ymax = chart_df[&#39;cumulative_era_adjusted_value&#39;].max() * 1.15
    plt.xlim(xmin,xmax)
    plt.ylim(ymin,ymax)
    ## add darker axis ##
    plt.axhline(y = ymin, color = &#39;black&#39;, linewidth = 1.75)
    plt.axvline(x = xmin, color = &#39;black&#39;, linewidth = 1.75)
    ## and a line at zero
    plt.axhline(y = 0, color = &#39;black&#39;, linewidth = 0.75)
    ## add labels at the end of each line ##
    for i in qbs_to_plot:
        plt.text(
            x = chart_df[chart_df[&#39;qb_name&#39;] == i][&#39;game_number&#39;].iloc[-1] + 1,
            y = chart_df[chart_df[&#39;qb_name&#39;] == i][&#39;cumulative_era_adjusted_value&#39;].iloc[-1] + 5,
            s = i,
            weight = &#39;bold&#39;,
            fontsize = &#39;small&#39;,
            backgroundcolor = &#39;#ffffff&#39;
        )
    ## remove legend ##
    plt.legend([],[], frameon=False)
    plt.tight_layout()</code></pre>
</div>
<p>Make your comparisons…</p>
<p>Manning, Brady, and Brees:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
qb_list = [&#39;Tom Brady&#39;, &#39;Peyton Manning&#39;,&#39;Drew Brees&#39;]
create_qb_chart(qb_list)
plt.show()</code></pre>
<p><img src="ranking-qbs-using-era-adjusted-elo_files/figure-html5/all_time_greats-1.png" width="624" data-distill-preview=1 /></p>
</div>
<p>Romo &gt; Dak &gt; Aikman?:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
qb_list = [&#39;Tony Romo&#39;, &#39;Troy Aikman&#39;, &#39;Dak Prescott&#39;]
create_qb_chart(qb_list)
plt.show()</code></pre>
<p><img src="ranking-qbs-using-era-adjusted-elo_files/figure-html5/cowboys-1.png" width="624" /></p>
</div>
<p>JaMarcus Russell, it could have been worse:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
qb_list = [&#39;JaMarcus Russell&#39;, &#39;Johnny Manziel&#39;, &#39;Ryan Leaf&#39;]
create_qb_chart(qb_list)
plt.show()</code></pre>
<p><img src="ranking-qbs-using-era-adjusted-elo_files/figure-html5/jamarcus-1.png" width="624" /></p>
</div>
<p>Maybe Leaf just needed more time and a better defense:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
qb_list = [&#39;Ryan Leaf&#39;, &#39;Trent Dilfer&#39;]
create_qb_chart(qb_list)
plt.show()</code></pre>
<p><img src="ranking-qbs-using-era-adjusted-elo_files/figure-html5/leaf-1.png" width="624" /></p>
</div>
<p>Mahomes, off to one of the best starts ever:</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
qb_list = [&#39;Patrick Mahomes&#39;, &#39;Aaron Rodgers&#39;, &#39;Dan Marino&#39;]
create_qb_chart(qb_list)
plt.show()</code></pre>
<p><img src="ranking-qbs-using-era-adjusted-elo_files/figure-html5/mahomes-1.png" width="624" /></p>
</div>
<p>Josh Allen, not so much …</p>
<div class="layout-chunk" data-layout="l-page">
<pre class="python"><code>
qb_list = [&#39;Josh Allen&#39;, &#39;Sam Darnold&#39;, &#39;Mitchell Trubisky&#39;, &#39;Baker Mayfield&#39;]
create_qb_chart(qb_list)
plt.show()</code></pre>
<p><img src="ranking-qbs-using-era-adjusted-elo_files/figure-html5/allen-1.png" width="624" /></p>
</div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
<h3 id="updates-and-corrections">Corrections</h3>
<p>If you see mistakes or want to suggest changes, please <a href="https://github.com/mrcaseb/open-source-football/issues/new">create an issue</a> on the source repository.</p>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
